[profile.default]
slow-timeout = { period = "10s", terminate-after = 3 }
run-extra-args = ["--skip", "rpc_test_"]

# This test downloads bundles from the network, which can take a while.
# It is only run on CI, so we can afford to be more patient.
[[profile.default.overrides]]
filter = 'test(networks::actors_bundle::tests::check_bundles_are_mirrored)'
slow-timeout = { period = "120s", terminate-after = 3 }

# This test downloads bundles from the network, which can take a while.
# It is only run on CI, so we can afford to be more patient.
[[profile.default.overrides]]
filter = 'test(state_migration_actor_bundle)'
slow-timeout = { period = "120s", terminate-after = 3 }

# This test checks the limitations of the message pool, which can take a while.
[[profile.default.overrides]]
filter = 'test(message_pool::msgpool::selection::test_selection::message_selection_trimming_msgs_two_senders)'
slow-timeout = { period = "120s", terminate-after = 3 }

# This test checks the limitations of the message pool, which can take a while.
[[profile.default.overrides]]
filter = 'test(message_pool::msgpool::selection::test_selection::message_selection_trimming_msgs_two_senders_complex)'
slow-timeout = { period = "120s", terminate-after = 3 }

# This test downloads bundles from the network, which can take a while.
# It is only run on CI, so we can afford to be more patient.
[[profile.default.overrides]]
filter = 'test(state_migration_generate_actors_metadata)'
slow-timeout = { period = "120s", terminate-after = 3 }

[[profile.default.overrides]]
# lint runs `cargo check` for source file discovery, which can take a while
filter = 'binary(lint)'
slow-timeout = { period = "120s", terminate-after = 3 }

# These tests download test snapshots from the network, which can take a while.
# There might be some network issues, so we allow some retries with backoff.
# Jitter is enabled to avoid [thundering herd issues](https://en.wikipedia.org/wiki/Thundering_herd_problem).
[[profile.default.overrides]]
filter = 'test(rpc_test_)'
slow-timeout = { period = "120s", terminate-after = 3 }
retries = { backoff = "exponential", count = 4, delay = "5s", jitter = true }
